{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\Documents\\\\EPSI COURS\\\\dev mobile\\\\livre\\\\src\\\\navigation\\\\AuthProvider.tsx\";\n\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport React, { useState } from 'react';\nimport { Connexion } from \"../API/ServiceAuthentification\";\nexport var AuthContext = React.createContext({\n  user: null,\n  login: function login() {},\n  logout: function logout() {}\n});\nexport var AuthProvider = function AuthProvider(_ref) {\n  var children = _ref.children;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      user = _useState2[0],\n      setUser = _useState2[1];\n\n  return React.createElement(AuthContext.Provider, {\n    value: {\n      user: user,\n      login: function (_login) {\n        function login(_x, _x2) {\n          return _login.apply(this, arguments);\n        }\n\n        login.toString = function () {\n          return _login.toString();\n        };\n\n        return login;\n      }(function (login, password) {\n        console.log('Login');\n        Connexion(login, password);\n        var fakeUser = {\n          username: 'bob'\n        };\n        setUser(fakeUser);\n        AsyncStorage.setItem('user', JSON.stringify(fakeUser));\n        console.log(AsyncStorage.getItem('user'));\n      }),\n      logout: function logout() {\n        setUser(null);\n        AsyncStorage.removeItem('user');\n      }\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 7\n    }\n  }, children);\n};","map":{"version":3,"sources":["D:/Documents/EPSI COURS/dev mobile/livre/src/navigation/AuthProvider.tsx"],"names":["AsyncStorage","React","useState","Connexion","AuthContext","createContext","user","login","logout","AuthProvider","children","setUser","password","console","log","fakeUser","username","setItem","JSON","stringify","getItem","removeItem"],"mappings":";;;;;AAAA,OAAOA,YAAP,MAAyB,2CAAzB;AACA,OAAOC,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,SAAT;AAGA,OAAO,IAAMC,WAAW,GAAGH,KAAK,CAACI,aAAN,CAIxB;AACCC,EAAAA,IAAI,EAAE,IADP;AAECC,EAAAA,KAAK,EAAE,iBAAM,CAAE,CAFhB;AAGCC,EAAAA,MAAM,EAAE,kBAAM,CAAE;AAHjB,CAJwB,CAApB;AAcP,OAAO,IAAMC,YAAyC,GAAG,SAA5CA,YAA4C,OAAgB;AAAA,MAAdC,QAAc,QAAdA,QAAc;;AAAA,kBAC7CR,QAAQ,CAAO,IAAP,CADqC;AAAA;AAAA,MAC9DI,IAD8D;AAAA,MACxDK,OADwD;;AAErE,SACE,oBAAC,WAAD,CAAa,QAAb;AACE,IAAA,KAAK,EAAE;AACLL,MAAAA,IAAI,EAAJA,IADK;AAELC,MAAAA,KAAK;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,QAAE,UAACA,KAAD,EAAQK,QAAR,EAAqB;AAC1BC,QAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACAX,QAAAA,SAAS,CAACI,KAAD,EAAOK,QAAP,CAAT;AACA,YAAMG,QAAQ,GAAG;AAACC,UAAAA,QAAQ,EAAE;AAAX,SAAjB;AACAL,QAAAA,OAAO,CAACI,QAAD,CAAP;AACAf,QAAAA,YAAY,CAACiB,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAeJ,QAAf,CAA7B;AACAF,QAAAA,OAAO,CAACC,GAAR,CAAYd,YAAY,CAACoB,OAAb,CAAqB,MAArB,CAAZ;AACD,OAPI,CAFA;AAULZ,MAAAA,MAAM,EAAE,kBAAM;AACZG,QAAAA,OAAO,CAAC,IAAD,CAAP;AACAX,QAAAA,YAAY,CAACqB,UAAb,CAAwB,MAAxB;AACD;AAbI,KADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAgBGX,QAhBH,CADF;AAoBH,CAtBM","sourcesContent":["import AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport React, { useState } from 'react'\r\nimport { Connexion } from '../API/ServiceAuthentification';\r\n\r\ntype User = null | {username: string}\r\nexport const AuthContext = React.createContext<{\r\n    user: User,\r\n    login: (login: String, password: String) => void,\r\n    logout: () => void\r\n}>({\r\n    user: null,\r\n    login: () => {},\r\n    logout: () => {} \r\n});\r\n\r\ninterface AuthProviderProps {\r\n\r\n}\r\n\r\nexport const AuthProvider: React.FC<AuthProviderProps> = ({children}) => {\r\n    const [user, setUser] = useState<User>(null);\r\n    return (\r\n      <AuthContext.Provider\r\n        value={{\r\n          user,\r\n          login: (login, password) => {\r\n            console.log('Login');\r\n            Connexion(login,password);\r\n            const fakeUser = {username: 'bob'};\r\n            setUser(fakeUser);\r\n            AsyncStorage.setItem('user', JSON.stringify(fakeUser))\r\n            console.log(AsyncStorage.getItem('user'));\r\n          },\r\n          logout: () => {\r\n            setUser(null);\r\n            AsyncStorage.removeItem('user');\r\n          },\r\n        }}>\r\n        {children}\r\n      </AuthContext.Provider>\r\n    );\r\n}"]},"metadata":{},"sourceType":"module"}